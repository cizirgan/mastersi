function emotionAnalysis(n){$.ajax({url:"/Emotion/GetImageEmotions",type:"POST",data:{imageDataBase64:n},dataType:"json",success:function(n){setEmotionData(n);console.log(n.veriler.result);$("#emotionJSON").text(JSON.stringify(JSON.parse(n.veriler.result),null,2))}})}function faceDetection(n){$.ajax({url:"/Face/DetectFace",type:"POST",data:{imageDataBase64:n},dataType:"json",success:function(n){setFaceData(n);$("#faceJSON").text(JSON.stringify(JSON.parse(n.veriler.result),null,2))}})}function fileUpload(n){var i=document.getElementById("mehmetForm"),t=new FormData(i);t.append("img",n);$.ajax({url:"/Emotion/UploadImage",type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,success:function(n){console.log(JSON.stringify(n));$("#mehmet").attr("src",n.name)}})}function onGetUserMediaButtonClick(){navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{document.querySelector("video").srcObject=n;const t=n.getVideoTracks()[0];imageCapture=new ImageCapture(t)}).catch(n=>console.log(n))}function onTakePhotoButtonClick(){imageCapture.takePhoto().then(n=>createImageBitmap(n)).then(n=>{const t=document.querySelector("#takePhotoCanvas");drawCanvas(t,n);var r=t.toDataURL(),i=t.toDataURL();emotionAnalysis(i);faceDetection(i)}).catch(n=>console.log(n))}function drawCanvas(n,t){n.width=getComputedStyle(n).width.split("px")[0];n.height=getComputedStyle(n).height.split("px")[0];let i=Math.min(n.width/t.width,n.height/t.height),r=(n.width-t.width*i)/2,u=(n.height-t.height*i)/2;n.getContext("2d").clearRect(0,0,n.width,n.height);n.getContext("2d").drawImage(t,0,0,t.width,t.height,r,u,t.width*i,t.height*i)}function setFaceData(n){var t=JSON.parse(n.veriler.result);$("#faceId").text(t[0].faceId);$("#top").text("top: "+t[0].faceRectangle.top);$("#left").text("left: "+t[0].faceRectangle.left);$("#width").text("width: "+t[0].faceRectangle.width);$("#height").text("height: "+t[0].faceRectangle.height);$("#smile").text("smile: "+t[0].faceAttributes.smile);$("#pitch").text("pitch: "+t[0].faceAttributes.headPose.pitch);$("#roll").text("roll: "+t[0].faceAttributes.headPose.roll);$("#yaw").text("yaw: "+t[0].faceAttributes.headPose.yaw);$("#gender").text("gender: "+t[0].faceAttributes.gender);$("#age").text("age: "+t[0].faceAttributes.age);$("#moustache").text("moustache: "+t[0].faceAttributes.facialHair.moustache);$("#beard").text("beard: "+t[0].faceAttributes.facialHair.beard);$("#sideburns").text("sideburns: "+t[0].faceAttributes.facialHair.sideburns);$("#glasses").text("glasses: "+t[0].faceAttributes.glasses);$("#anger").text("anger: "+t[0].faceAttributes.emotion.anger);$("#contempt").text("contempt: "+t[0].faceAttributes.emotion.contempt);$("#disgust").text("disgust: "+t[0].faceAttributes.emotion.disgust);$("#fear").text("fear: "+t[0].faceAttributes.emotion.fear);$("#happiness").text("happiness: "+t[0].faceAttributes.emotion.happiness);$("#neutral").text("neutral: "+t[0].faceAttributes.emotion.neutral);$("#sadness").text("sadness: "+t[0].faceAttributes.emotion.sadness);$("#surprise").text("surprise: "+t[0].faceAttributes.emotion.anger);$("#blurLevel").text("blurLevel: "+t[0].faceAttributes.blur.blurLevel);$("#blurValue").text("blurValue: "+t[0].faceAttributes.blur.value);$("#exposureLevel").text("exposureLevel: "+t[0].faceAttributes.exposure.exposureLevel);$("#exposureValue").text("exposureValue: "+t[0].faceAttributes.exposure.value);$("#noiseLevel").text("noiseLevel: "+t[0].faceAttributes.noise.noiseLevel);$("#noiseValue").text("noiseValue: "+t[0].faceAttributes.noise.value);$("#eyeMakeup").text("eyeMakeup: "+t[0].faceAttributes.makeup.eyeMakeup);$("#lipMakeup").text("lipMakeup: "+t[0].faceAttributes.makeup.lipMakeup);$("#accessories").text("accessories: "+t[0].faceAttributes.accessories);$("#foreheadOccluded").text("foreheadOccluded: "+t[0].faceAttributes.occlusion.foreheadOccluded);$("#eyeOccluded").text("eyeOccluded: "+t[0].faceAttributes.occlusion.eyeOccluded);$("#mouthOccluded").text("mouthOccluded: "+t[0].faceAttributes.occlusion.mouthOccluded);$("#bald").text("bald: "+t[0].faceAttributes.hair.bald);$("#invisible").text("invisible: "+t[0].faceAttributes.hair.invisible);$("#hairColorBox").html("");$.each(t[0].faceAttributes.hair.hairColor,function(n,t){$("#hairColorBox").append('<p class="list-group-item-text"><strong>'+t.color+":<\/strong> "+t.confidence+"<\/p>")})}function setEmotionData(n){var t=JSON.parse(n.veriler.result);$("#angerE").html("<strong>Anger:<\/strong> "+t[0].scores.anger);$("#contemptE").html("<strong>Contempt:<\/strong> "+t[0].scores.contempt);$("#disgustE").html("<strong>Disgust:<\/strong> "+t[0].scores.disgust);$("#fearE").html("<strong>Fear:<\/strong> "+t[0].scores.fear);$("#happinessE").html("<strong>Happiness:<\/strong> "+t[0].scores.happiness);$("#neutralE").html("<strong>Neutral:<\/strong> "+t[0].scores.neutral);$("#sadnessE").html("<strong>Sadness:<\/strong> "+t[0].scores.sadness);$("#surpriseE").html("<strong>Surprise:<\/strong> "+t[0].scores.surprise)}$(document).ready(function(){var n=$("#loading");$(document).ajaxStart(function(){n.show()});$(document).ajaxStop(function(){n.hide()})});var imageCapture;document.querySelector("video").addEventListener("play",function(){document.querySelector("#takePhotoButton").disabled=!1});document.querySelector("#getUserMediaButton").addEventListener("click",onGetUserMediaButtonClick);document.querySelector("#takePhotoButton").addEventListener("click",onTakePhotoButtonClick);